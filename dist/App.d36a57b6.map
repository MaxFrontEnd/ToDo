{"version":3,"sources":["readFromJsonServer.js","addToJsonServer.js","removeFromJsonServer.js","App.js"],"names":["URL","getDataFromJson","Promise","resolve","reject","xhr","XMLHttpRequest","open","onload","readyState","status","responseText","statusText","onerror","console","log","send","data","setDataToJson","setRequestHeader","onreadystatechange","DONE","err","JSON","stringify","removeDatafromJson","Li","id","title","blokForElement","document","createElement","className","element","innerHTML","classList","onclick","contains","replace","deleteButton","parentNode","removeFromList","list","remove","appendChild","prototype","addButton","addLi","arrOfElements","ol","querySelector","forEach","value","index","li","combineURL","displayTasks","then","fullResponse","parse","catch","error","addEventListener","ClickOnButton","inputText","obj","isDone","text","location","reload"],"mappings":"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","file":"App.d36a57b6.map","sourceRoot":"..\\src","sourcesContent":["// get data from Json-server function\r\nconst URL = \"http://localhost:3000/todos\";\r\n\r\nvar getDataFromJson = function(URL) {\r\n  return new Promise(function(resolve, reject) {\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open(\"GET\", URL);\r\n    xhr.onload = function() {\r\n      if (xhr.readyState === 4) {\r\n        if (xhr.status === 200) {\r\n          resolve(xhr.responseText);\r\n        } else {\r\n          reject(xhr.statusText);\r\n        }\r\n      }\r\n      xhr.onerror = function() {\r\n        console.log(xhr.statusText);\r\n      };\r\n    };\r\n    xhr.send();\r\n  });\r\n};\r\n\r\nvar data = getDataFromJson(URL);\r\n\r\nexport default data;\r\n","var setDataToJson = function(URL, data) {\r\n  return new Promise(function(resolve, reject) {\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open(\"POST\", URL);\r\n    xhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n    xhr.onreadystatechange = function() {\r\n      if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 201) {\r\n        console.log(XMLHttpRequest.DONE);\r\n        console.log(xhr.status);\r\n        resolve(\"new item added\");\r\n      } else {\r\n        xhr.onerror = function(err) {\r\n          reject(err);\r\n        };\r\n      }\r\n      xhr.onerror = function(err) {\r\n        console.log(err);\r\n      };\r\n    };\r\n    xhr.send(JSON.stringify(data));\r\n  });\r\n};\r\nexport default setDataToJson;\r\n","var removeDatafromJson = function(URL) {\r\n  return new Promise(function(resolve, reject) {\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open(\"DELETE\", URL);\r\n    xhr.onreadystatechange = function() {\r\n      if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 201) {\r\n        console.log(XMLHttpRequest.DONE);\r\n        console.log(xhr.status);\r\n        resolve(\"item deleted\");\r\n      } else {\r\n        xhr.onerror = function(err) {\r\n          reject(err);\r\n        };\r\n      }\r\n      xhr.onerror = function(err) {\r\n        console.log(err);\r\n      };\r\n    };\r\n    xhr.send();\r\n  });\r\n};\r\nexport default removeDatafromJson;\r\n","const URL = \"http://localhost:3000/todos\";\r\nimport data from \"./readFromJsonServer\";\r\nimport sendData from \"./addToJsonServer\";\r\nimport deleteData from \"./removeFromJsonServer\";\r\n\r\nvar Li = function(id, title) {\r\n  [this.id = id, this.title = title] = [id, title];\r\n  var blokForElement = document.createElement(\"div\");\r\n  blokForElement.className = \"block-for-element\";\r\n  var element = document.createElement(\"li\");\r\n  blokForElement.id = this.id;\r\n  element.innerHTML = this.title;\r\n  element.classList = \"li\";\r\n  element.onclick = function() {\r\n    element.classList.contains(\"li-done\")\r\n      ? element.classList.replace(\"li-done\", \"li\")\r\n      : element.classList.replace(\"li\", \"li-done\");\r\n  };\r\n  // button add to every list\r\n  var deleteButton = document.createElement(\"button\");\r\n  deleteButton.innerHTML = \"Удалить\";\r\n  deleteButton.onclick = function() {\r\n    console.log(this.parentNode.id);\r\n    removeFromList(this.parentNode.id);\r\n    var list = this.parentNode;\r\n    list.remove();\r\n  };\r\n  deleteButton.classList = \"list-button\";\r\n  blokForElement.appendChild(element);\r\n  blokForElement.appendChild(deleteButton);\r\n  return blokForElement;\r\n};\r\n\r\nLi.prototype.addButton = function() {};\r\n// Ad a new list item\r\nfunction addLi(arrOfElements) {\r\n  var ol = document.querySelector(\".list\");\r\n  arrOfElements.forEach(function(value, index) {\r\n    // List element destructurning\r\n    var [id, title] = [arrOfElements[index].id, arrOfElements[index].title];\r\n    var li = new Li(id, title);\r\n    //console.log(li);\r\n    ol.appendChild(li);\r\n  });\r\n}\r\n\r\n// Remove from li from list\r\nfunction removeFromList(id) {\r\n  var combineURL = URL + \"/\" + id;\r\n  deleteData(combineURL);\r\n}\r\n\r\n//Get data from server and display it\r\nfunction displayTasks(data) {\r\n  data\r\n    .then(function(fullResponse) {\r\n      addLi(JSON.parse(fullResponse));\r\n      //console.log(resp);\r\n    })\r\n    .catch(function(error) {\r\n      console.log(error);\r\n    });\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", displayTasks(data));\r\n\r\n//Add new toDo button\r\nvar addButton = document.querySelector(\".button\");\r\naddButton.onclick = function ClickOnButton() {\r\n  var inputText = document.querySelector(\".input\").value;\r\n  var obj = { title: inputText, isDone: false };\r\n  if (inputText) {\r\n    sendData(URL, obj).then(function(text) {\r\n      console.log(text);\r\n      //reload a page after new element li was added\r\n      document.location.reload(true);\r\n    });\r\n  } else {\r\n    console.log(\"You need to enter something\");\r\n  }\r\n};\r\n"]}